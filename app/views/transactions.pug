extends layout

block style 
  link(rel="stylesheet" href="./stylesheets/transaction_list.css")
  script(src="./scripts/transactions.js" defer)

block content
  h1= title

  if transactions
    div.purple
        div#sorting 
          p Sort
          div#sortingDD
            div.quantity
              h4 Amount
              p#quantAsc Asc
              p#quantDesc Desc

            div.date
              h4 Date
              p#dateAsc Asc
              p#dateDesc Desc

        div#filtering Filter
          div#filteringDD
            div
              h4 Date
              p Last Day
              p Last Week
              p Last Month

    //- const descAma = transactions.sort((a, b) => b.Amount - a.Amount)
    //- const ascAma = transactions.sort((a, b) => a.Amount - b.Amount)
    
    //- const ascTime = transactions.sort((a, b) => a.Date - b.Date)
    //- const descTime = transactions.sort((a, b) => b.Date - a.Date)

    
    //- transactions = transactions.filter((a) => a.Date < new Date(Date.now() - 180 * 24 * 60 * 60 * 1000))
    
    //- update()
    ul#main
      each transaction in transactions
        li
          div.leftie
            div.void
            div
              p.invisible #{transaction.TransactionID}
              p.description #{transaction.Description}
              p.date #{transaction.Date?transaction.Date.toISOString().split('T')[0]:''}

            
          //-p
            | TransactionID: #{transaction.TransactionID}, Type: #{transaction.Type}, Amount: #{transaction.Amount},
            | Date: #{transaction.Date ? transaction.Date.toISOString().split('T')[0] : 'N/A'}
            | Description: #{transaction.Description}

          div.rightie
            p.amount #{transaction.Type=='expense'?'-':'+'} $#{transaction.Amount}
            p.dots ⋯
            div.options.invisible
              - let urlUpdate = `/transactions/${transaction.TransactionID}/update`
              - let urlDelete = `/transactions/${transaction.TransactionID}/delete`
              a(href=urlUpdate) Edit
              a(id='delete') Delete
      
      dialog
        form(method='POST')
          div
            p Are you sure you want to delete this transaction?
            br
            p.storage
          
          div.invisible
            input(type='text' name='transaction_id' id='secret')
          
          div.buttons
            button(type="submit" id='submit') Yes
            button(type="reset" id='close') No

    ul.invisible#descAmaUl
      - transactions.sort((a, b) => b.Amount - a.Amount)
      each transaction in transactions
        li
          div.leftie
            div.void
            div
              p.invisible #{transaction.TransactionID}
              p.description #{transaction.Description}
              p.date #{transaction.Date?transaction.Date.toISOString().split('T')[0]:''}

            
          //-p
            | TransactionID: #{transaction.TransactionID}, Type: #{transaction.Type}, Amount: #{transaction.Amount},
            | Date: #{transaction.Date ? transaction.Date.toISOString().split('T')[0] : 'N/A'}
            | Description: #{transaction.Description}

          div.rightie
            p.amount #{transaction.Type=='expense'?'-':'+'} $#{transaction.Amount}
            p.dots ⋯
            div.options.invisible
              - let urlUpdate = `/transactions/${transaction.TransactionID}/update`
              - let urlDelete = `/transactions/${transaction.TransactionID}/delete`
              a(href=urlUpdate) Edit
              a(id='delete') Delete
      
      dialog
        form(method='POST')
          div
            p Are you sure you want to delete this transaction?
            br
            p.storage
          
          div.invisible
            input(type='text' name='transaction_id' id='secret')
          
          div.buttons
            button(type="submit" id='submit') Yes
            button(type="reset" id='close') No
    
    ul.invisible#ascAmaUl
      - transactions.sort((a, b) => a.Amount - b.Amount)
      each transaction in transactions
        li
          div.leftie
            div.void
            div
              p.invisible #{transaction.TransactionID}
              p.description #{transaction.Description}
              p.date #{transaction.Date?transaction.Date.toISOString().split('T')[0]:''}

            
          //-p
            | TransactionID: #{transaction.TransactionID}, Type: #{transaction.Type}, Amount: #{transaction.Amount},
            | Date: #{transaction.Date ? transaction.Date.toISOString().split('T')[0] : 'N/A'}
            | Description: #{transaction.Description}

          div.rightie
            p.amount #{transaction.Type=='expense'?'-':'+'} $#{transaction.Amount}
            p.dots ⋯
            div.options.invisible
              - let urlUpdate = `/transactions/${transaction.TransactionID}/update`
              - let urlDelete = `/transactions/${transaction.TransactionID}/delete`
              a(href=urlUpdate) Edit
              a(id='delete') Delete
      
      dialog
        form(method='POST')
          div
            p Are you sure you want to delete this transaction?
            br
            p.storage
          
          div.invisible
            input(type='text' name='transaction_id' id='secret')
          
          div.buttons
            button(type="submit" id='submit') Yes
            button(type="reset" id='close') No
    
    ul.invisible#ascTimeUl
      - transactions.sort((a, b) => a.Date - b.Date)
      each transaction in transactions
        li
          div.leftie
            div.void
            div
              p.invisible #{transaction.TransactionID}
              p.description #{transaction.Description}
              p.date #{transaction.Date?transaction.Date.toISOString().split('T')[0]:''}

            
          //-p
            | TransactionID: #{transaction.TransactionID}, Type: #{transaction.Type}, Amount: #{transaction.Amount},
            | Date: #{transaction.Date ? transaction.Date.toISOString().split('T')[0] : 'N/A'}
            | Description: #{transaction.Description}

          div.rightie
            p.amount #{transaction.Type=='expense'?'-':'+'} $#{transaction.Amount}
            p.dots ⋯
            div.options.invisible
              - let urlUpdate = `/transactions/${transaction.TransactionID}/update`
              - let urlDelete = `/transactions/${transaction.TransactionID}/delete`
              a(href=urlUpdate) Edit
              a(id='delete') Delete
      
      dialog
        form(method='POST')
          div
            p Are you sure you want to delete this transaction?
            br
            p.storage
          
          div.invisible
            input(type='text' name='transaction_id' id='secret')
          
          div.buttons
            button(type="submit" id='submit') Yes
            button(type="reset" id='close') No

    ul.invisible#descTimeUl
      - transactions.sort((a, b) => b.Date - a.Date)
      each transaction in transactions
        li
          div.leftie
            div.void
            div
              p.invisible #{transaction.TransactionID}
              p.description #{transaction.Description}
              p.date #{transaction.Date?transaction.Date.toISOString().split('T')[0]:''}

            
          //-p
            | TransactionID: #{transaction.TransactionID}, Type: #{transaction.Type}, Amount: #{transaction.Amount},
            | Date: #{transaction.Date ? transaction.Date.toISOString().split('T')[0] : 'N/A'}
            | Description: #{transaction.Description}

          div.rightie
            p.amount #{transaction.Type=='expense'?'-':'+'} $#{transaction.Amount}
            p.dots ⋯
            div.options.invisible
              - let urlUpdate = `/transactions/${transaction.TransactionID}/update`
              - let urlDelete = `/transactions/${transaction.TransactionID}/delete`
              a(href=urlUpdate) Edit
              a(id='delete') Delete
      
      dialog
        form(method='POST')
          div
            p Are you sure you want to delete this transaction?
            br
            p.storage
          
          div.invisible
            input(type='text' name='transaction_id' id='secret')
          
          div.buttons
            button(type="submit" id='submit') Yes
            button(type="reset" id='close') No
 
  else
    p There are no users

  